# üõ† –°—Ç–∞–¥–∏—è —Å–±–æ—Ä–∫–∏
FROM gradle:8.5-jdk21 AS builder

WORKDIR /netSoc

# –ö–æ–ø–∏—Ä—É–µ–º –≤—Å—é –º–æ–Ω–æ—Ä–µ–ø—É –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
COPY . .

# –°–±–æ—Ä–∫–∞ –∏–∑ –∫–æ—Ä–Ω—è ‚Äî –º–æ–¥—É–ª—å notification-service –±—É–¥–µ—Ç —Å–æ–±—Ä–∞–Ω –≤–º–µ—Å—Ç–µ —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
RUN gradle :notification-service:bootJar --no-daemon

# üßä –§–∏–Ω–∞–ª—å–Ω—ã–π –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑
FROM eclipse-temurin:21-jdk-alpine

WORKDIR /netSoc
COPY --from=builder /netSoc/notification-service/build/libs/*.jar app.jar

ENTRYPOINT ["java", "-jar", "app.jar"]
