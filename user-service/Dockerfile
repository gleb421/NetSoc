# üõ† –°—Ç–∞–¥–∏—è —Å–±–æ—Ä–∫–∏
FROM gradle:8.5-jdk21 AS builder

# –°–æ–∑–¥–∞–µ–º —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
WORKDIR /netSoc/user-service

# –ö–æ–ø–∏—Ä—É–µ–º –≤—Å—é –º–æ–Ω–æ—Ä–µ–ø—É (–ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ Dockerfile –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ ./notification-service)
COPY . .

# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ notification-service –∏ —Å–æ–±–∏—Ä–∞–µ–º
WORKDIR /netSoc/user-service
RUN gradle :user-service:bootJar --no-daemon

# üßä –§–∏–Ω–∞–ª—å–Ω—ã–π –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑
FROM eclipse-temurin:21-jdk-alpine

WORKDIR /netSoc
COPY --from=builder /netSoc/user-service/build/libs/*.jar app.jar

ENTRYPOINT ["java", "-jar", "app.jar"]
